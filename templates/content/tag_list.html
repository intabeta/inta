{% extends "content/base_content.html" %}
{% load humanize %}
{% load thumbnail %}
{% load content_extras %}

{% block extrahead %}
<script type="text/javascript">

//fetching selected values / checked values
function getSelectedFavs(){
    $("input[name='phpqa[]']").each(function() {
        if ($(this).attr('checked'))
        {
            // alert($(this).val());
            $('#favoritesform').append('<input type="hidden" name="entries" value="' + $(this).val() + '" />');
        }
    });
    $('#favoritesform').submit();
}

//fetching selected values / checked values
function getSelectedVals(){
    $("input[name='phpqa[]']").each(function() {
        if ($(this).attr('checked'))
        {
            // alert($(this).val());
            $('#emailform').append('<input type="hidden" name="entries" value="' + $(this).val() + '" />');
        }
    });
    $('#emailform').submit();
}
</script>
 <style type="text/css">
 .table table-condensced {
 background-color: white;
 }
 
 /* 
 body {
 	background:#ddf;
 }
 </style>

{% endblock %}

{% block content_title %}<h2>Inta - {% for tag, slug in breadcrumbdata %} <a href="/content/tags/decay1/{{ slug }}/" style="color:inherit">{{ tag }}</a>{% if not forloop.last %} - {% endif %}{% endfor %}</h2>
<!--If we want Twitter here...-->
 {% comment %}  <p> <a class="btn btn-info" href="javascript:(function(){var a=window,b=document,c=encodeURIComponent,d=a.open('http://intabeta.com/content/submit_plugin/?op=edit&output=popup&bkmk='+c(b.location)+'&title='+c(b.title),'bkmk_popup','left='+((a.screenX||a.screenLeft)+10)+',top='+((a.screenY||a.screenTop)+10)+',height=200px,width=500px,resizable=1,alwaysRaised=1');a.setTimeout(function(){d.focus()},300)})();">Shortcut</a>
  <a href="//twitter.com/Inta_beta">{{ tags }}@inta_beta</a>    {% endcomment %} 




{% endblock %}

{% block side %}
<div class="well sidebar-nav">
	<div class="nav nav-list">
		<ul class="nav nav-list">
			<li class="nav-header">Top Tags</li>
			{% for tag in toptags %}<li><a href="/content/tags/decay1/{{ tag.0 }}">{{ tag.0 }}</a></li>{% endfor %}
		</ul>
	</div>
</div>
{% endblock %}

{% block side2 %}

  <div class="well sidebar-nav">
  	<div class="nav nav-list">
  		<ul class="nav nav-list">
  			<li class="nav-header">List Options</li>
  			<li {% if method == 'decay1' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay1/"><i class="icon-time"></i>30 mins</a></li>
  			<li {% if method == 'decay2' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay2/"><i class="icon-time"></i>3 hours</a></li>
  			<li {% if method == 'decay3' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay3/"><i class="icon-time"></i>1 day</a></li>
  			<li {% if method == 'decay4' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay4/"><i class="icon-time"></i>3 days</a></li>
  			<li {% if method == 'decay5' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay5/"><i class="icon-time"></i>1 week</a></li>
  			<li {% if method == 'decay6' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay6/"><i class="icon-time"></i>1 month</a></li>
  			<li {% if method == 'decay7' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay7/"><i class="icon-time"></i>3 months</a></li>
  			<li {% if method == 'decay8' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/decay8/"><i class="icon-time"></i>1 year</a></li>
  			<li {% if method == 'votes' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/votes/"><i class="icon-ok"></i>Timeless</a></li>
		</ul>
	</div>
	<div class="nav nav-list">
		<ul class="inline">
			<li class="nav-header">Smaller View</li>
  			<li {% if method == 'favorites' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/favorites/"><i class="icon-star-empty"></i></a></li>
  			<li {% if method == 'votes' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/votes/"><i class="icon-ok"></i></a></li>
 		 	<li {% if method == 'growth' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/growth/"><i class="icon-signal"></i></a></li> 
 		</ul>
 	</div>
<!--
			<span class="badge">1</span>
 		 	<div class="dropdown">
  				<a class="dropdown-toggle" data-toggle="dropdown" href="#">Post Age</a>
  				<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
  					<li {% if method == 'green' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/green/"><span class="badge badge-success"></span>&nbsp;New</a></li>
 					<li {% if method == 'orange' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/orange/"><span class="badge badge-warning"></span>&nbsp;Recent</a></li>
  					<li {% if method == 'red' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/red/"><span class="badge badge-important"></span>&nbsp;Old</a></li>
  					<li {% if method == 'black' %}class="active"{% endif %}><a href="/content/ig/{{ ig.slug }}/black/"><span class="badge badge-inverse"></span>&nbsp;Older</a></li> 
  				</ul>
			</div>
			

	<div class="nav nav-list">
  		<ul class="nav nav-list">
        	<li class="nav-header">For checked items </li>
            <li><button type="submit" class="btn btn-primary" class="Brian_color"><a href="javascript:void();" onclick="getSelectedVals()"><i class="icon-envelope"></i> Email to a friend</button></li>
        	<li><button type="submit" class="btn btn-primary" class="Brian_color"><a href="javascript:void();" onclick="getSelectedFavs()"><i class="icon-star-empty"></i>Save in favorites</button></li>
        </ul>
    </div>
  <div>
  
<form id="emailform" action="/email/" method="post">
{% csrf_token %}

</form>
<form id="favoritesform" action="/favorites/" method="post">
{% csrf_token %}

</form>
-->

</div>


{% endblock %}



{% block content %}

<table class="table table-condensed">
<tbody>
{% if postdata %}
{% for post, score in postdata %}
<tr>
<td>

<a href="http://{{ post.domain }}" target="_blank" >
<img style="max-width: 40px;" src="{{ MEDIA_URL }}{{ post.logo|default:"site_logos/default.png" }}" width="40" title="{{ post.domain }}" alt="{{ post.title }}" />
</a>
    
</td>
<td>

{% if method == 'votes' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.ranking }}</span>&nbsp;
{% endif %}
{% if method == 'growth' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.last_growth|floatformat }}%</span>&nbsp;
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_1|floatformat }}</span>&nbsp;

<!-- ***** If we do the decay slider, this is where we would add the actual different rankings.
would take out 'votes' and 'growth', maybe(?) even 'green' 'orange' 'red' and 'black' ****  -->
{% endif %}
{% if method == 'decay1' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ score }}</span>&nbsp;
{% endif %}
{% if method == 'decay2' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ score }}</span>&nbsp;
{% endif %}
{% if method == 'decay3' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_3|floatformat }}</span>&nbsp;
{% endif %}
{% if method == 'decay4' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_4|floatformat }}</span>&nbsp;
{% endif %}
{% if method == 'decay5' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_5|floatformat }}</span>&nbsp;
{% endif %}
{% if method == 'decay6' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_6|floatformat }}</span>&nbsp;
{% endif %}
{% if method == 'decay7' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_7|floatformat }}</span>&nbsp;
{% endif %}
{% if method == 'decay8' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.decayed_score_8|floatformat }}</span>&nbsp;
{% endif %}


{% if method == 'favorites' %}
<span class="badge {{ post.date_added|bubble_color }}">* {{ post.favorites }}</span>&nbsp;
{% endif %}

{% if method == 'green' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.ranking }}</span>&nbsp;
{% endif %}
{% if method == 'orange' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.ranking }}</span>&nbsp;
{% endif %}
{% if method == 'red' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.ranking }}</span>&nbsp;
{% endif %}
{% if method == 'black' %}
<span class="badge {{ post.date_added|bubble_color }}">{{ post.ranking }}</span>&nbsp;
{% endif %}



<a href="{{ post.url }}" onClick="_gaq.push(['_trackEvent', 'Nikos GA?', 'Link', '{{ post.title }}']);" class="main-link" target="_blank">
{% if post.title == "Untitled" %}
{{ post.url }}
{% else %}
{{ post.title }}
{% endif %}
</a>
&nbsp;{{ post.date_added|date:"M j" }}
<br />

{% for othertag in post.tags.all %}
	<span class="label"><a href="/content/tags/decay1/{{ tags}}|{{ othertag }}/" style="color:#FFFFFF;text-decoration:none">{{ othertag }}</a></span>
{% endfor %}

<br />
{{ post.summary|default_if_none:"" }}

<!-- ***** This shows the date, source, and user of the post... **** 
figure.kudo{position:absolute;right:15px;top:65px;background-color:#000;width:58px;height:58px;border-radius:100%;-webkit-border-radius:100%;-moz-border-radius:100%;box-shadow:0 40px 20px #fff}figure.kudo a{display:block;position:relative;background-color:#fff;display:block;margin:0 auto;top:5px;width:46px;height:46px;border-radius:100%;-webkit-border-radius:100%;-moz-border-radius:100%;border:1px solid #000;cursor:default}figure.kudo div.filling{position:absolute;background-color:#000;display:block;width:40px;height:40px;top:3px;left:3px;background-repeat:no-repeat;background-position:center center;background-size:100%;border-radius:100%;-webkit-border-radius:100%;-moz-border-radius:100%;transform:scale(0.3);transition-property:opacity,background-color,transform;transition-duration:1s;transition-timing-function:ease-out;-webkit-transform:scale(0.3);-webkit-transition-property:opacity,background-color,-webkit-transform;-webkit-transition-duration:1s;-webkit-transition-timing-function:ease-out;-moz-transform:scale(0.3);-moz-transition-property:opacity,background-color,-moz-transform;-moz-transition-duration:1s;-moz-transition-timing-function:ease-out}figure.kudo.activated div.filling{transform:scale(1.2);-webkit-transform:scale(1.2);-moz-transform:scale(1.2)}figure.kudo div.num,figure.kudo div.txt{position:absolute;width:58px;left:-6px}figure.kudo div.num{top:53px;font-family:"freight-sans-pro",sans-serif;font-size:20px;line-height:20px;font-weight:700;text-align:center;color:#000}figure.kudo div.txt{top:73px;text-align:center;text-transform:uppercase;letter-spacing:1px;font-family:"freight-sans-pro",sans-serif;font-size:12px;font-weight:700}figure.kudo.activated div.txt{top:55px;line-height:14px;font-size:17px;letter-spacing:0;text-align:center;font-weight:700}figure.kudo.complete div.filling{background-image:url(//d1jcp5e5r52ocf.cloudfront.net/svbtle.png);transition-property:none;animation:bounce 1s;animation-iteration-count:1;transform:scale(1);-webkit-transition-property:none;-webkit-animation:bounce 1s;-webkit-animation-iteration-count:1;-webkit-transform:scale(1);-moz-transition-property:none;-moz-animation:bounce 1s;-moz-animation-iteration-count:1;-moz-transform:scale(1)}figure.kudo.bottom{float:none;left:auto;top:auto;right:auto;bottom:auto;position:relative;display:block;width:80px;height:80px;margin-bottom:50px;margin-top:30px}figure.kudo.bottom div.filling{width:60px;height:60px;top:4px;left:4px}figure.kudo.bottom a{width:68px;height:68px;top:5px}figure.kudo.bottom div.num{top:0;left:85px;font-size:30px;line-height:50px;text-align:left}figure.kudo.bottom div.txt{top:44px;left:85px;text-align:left;font-size:14px;line-height:14px}figure.kudo.bottom.activated div.txt{top:16px;font-size:30px;line-height:30px;letter-spacing:0;text-align:left;font-weight:700;min-width:200px;text-transform:none}
KUDOS
 -->  
        {% comment %}
&nbsp;
        <a  data-toggle="collapse" href="#intro-{{ forloop.counter }}">
        <i class="icon-chevron-down"></i>
        </a>     
<!-- the down arrow functionality. We could re-use for filters...  -->  
        
<br />
    Submitted {% comment %}by <a href="/accounts/{{ post.submitted_by }}/">{{ post.submitted_by }}</a>, {{ post.date_added|naturaltime }}, from <a href="http://{{ post.domain }}" target="_blank">{{ post.domain }}</a>.     
    {% endcomment %}




<div style="margin-top: 6px;"> 

{% if user.id %}
    
    <form action="" method="post" class="button-form">
    {% csrf_token %}
        <input type="hidden" name="post_slug" value="{{ post.slug }}" />
        <input type="hidden" name="action" value="vote" />
        <button class="btn btn-mini const-width {% if post.slug in voter %}btn-success{% endif %}" {% if post.slug in voter or post.slug in double_voter %}disabled="disabled"{% endif %} type="submit">
        Good
            
        </button>
    </form> 
    <form action="" method="post" class="button-form">
    {% csrf_token %}
        <input type="hidden" name="post_slug" value="{{ post.slug }}" />
        <input type="hidden" name="action" value="double_vote" />
        <button class="btn btn-mini const-width {% if post.slug in double_voter %}btn-success{% endif %}" {% if post.slug in voter or post.slug in double_voter %}disabled="disabled"{% endif %} type="submit">
        Great
            
        </button>
        &nbsp;
       <i class="icon-envelope"></i><i class="icon-star"></i> <input name="phpqa[]" type="checkbox" value="{{ post.slug }}">
    
   </form>
{% else %}
    
    <form action="" method="post" class="button-form">
    {% csrf_token %}
        <input type="hidden" name="post_slug" value="{{ post.slug }}" />
        <input type="hidden" name="action" value="vote" />
        <button class="btn btn-mini const-width {% if post.slug in voter %}btn-success{% endif %}" {% if post.slug in voter or post.slug in double_voter %}disabled="disabled"{% endif %} type="submit">
        Good
            
        </button>
    </form> 
    <form action="" method="post" class="button-form">
    {% csrf_token %}
        <input type="hidden" name="post_slug" value="{{ post.slug }}" />
        <input type="hidden" name="action" value="double_vote" />
        <button class="btn btn-mini const-width {% if post.slug in double_voter %}btn-success{% endif %}" {% if post.slug in voter or post.slug in double_voter %}disabled="disabled"{% endif %} type="submit">
        Great
            
        </button>
        &nbsp;
       <i class="icon-envelope"></i><i class="icon-star"></i> <input name="phpqa[]" type="checkbox" value="{{ post.slug }}">
    
   </form>
{% endif %}

</div>
</td>

</tr>
{% endfor %}
{% else %}
<tr><td>There are no entries that match your search criteria</td></tr>
{% endif %}
</tbody>
</table>
<hr />
{% endblock %}

{% comment %}
	{% block side3 %}
	{% endblock %}
{% endcomment %}

{% block extrascript %}
<script>
    !function ($) {
        //caching all the "tr" objects so that gain a better performance.

        var $tableRows = $('table>tbody>tr');
        //hide all the all the select & vote lines
        $tableRows.find("td>div").css('visibility','hidden');
        $(function () {
            $tableRows.hover(function () {
                //when mouse is on, animate it via 'fadeout'
                $(this).find("td>div").css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},500);
            }, function () {
                //by the same token, fade it out when mouse is out.
                $(this).find("td>div").css({opacity: 1.0, visibility: "hidden"}).animate({opacity: 0.0},500);
            });
        });
    }(window.jQuery);

</script>

{% endblock %}
